[uwsgi]
# WSGI 应用配置
module = wsgi:app
callable = app

# 进程和线程配置
master = true
processes = 4
threads = 2
enable-threads = true

# 网络配置
socket = 0.0.0.0:8000
http = 0.0.0.0:5000
protocol = http

# 性能优化
vacuum = true
die-on-term = true
lazy-apps = true
single-interpreter = true

# 内存管理
max-requests = 1000
max-requests-delta = 50
reload-on-rss = 512
limit-as = 1024

# 日志配置
logto = logs/uwsgi.log
log-maxsize = 20971520
log-backupname = logs/uwsgi.log.old

# 安全设置
uid = ubuntu
gid = ubuntu
chmod-socket = 666
chown-socket = ubuntu:ubuntu

# 进程管理
pidfile = /tmp/uwsgi-llm-mapreduce.pid
daemonize = logs/uwsgi-daemon.log

# 自动重载（开发环境）
# py-autoreload = 1

# 统计信息
stats = 127.0.0.1:9191
stats-http = true
